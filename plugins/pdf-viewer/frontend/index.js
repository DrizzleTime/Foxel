(function(l,R,a){"use strict";var _={exports:{}},c={};var E;function v(){if(E)return c;E=1;var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function t(d,e,r){var o=null;if(r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),"key"in e){r={};for(var u in e)u!=="key"&&(r[u]=e[u])}else r=e;return e=r.ref,{$$typeof:s,type:d,key:o,ref:e!==void 0?e:null,props:r}}return c.Fragment=i,c.jsx=t,c.jsxs=t,c}var p;function h(){return p||(p=1,_.exports=v()),_.exports}var n=h();const T=({filePath:s,host:i})=>{const{foxelApi:t}=window.__FOXEL_EXTERNALS__,[d,e]=l.useState(),[r,o]=l.useState(!0),[u,w]=l.useState();return l.useEffect(()=>{let x=!1;o(!0),w(void 0),e(void 0);const j=s.replace(/^\/+/,"");return t.vfs.getTempLinkToken(j).then(f=>{if(x)return;const m=t.vfs.getTempPublicUrl(f.token);e(m+"#toolbar=1&navpanes=1")}).catch(f=>{x||w(f.message||"获取临时链接失败")}).finally(()=>{x||o(!1)}),()=>{x=!0}},[s,t]),r?n.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(a.Spin,{tip:"正在加载 PDF..."})}):u?n.jsx(a.Result,{status:"error",title:"无法加载 PDF",subTitle:u,extra:n.jsx(a.Button,{type:"primary",onClick:i.close,children:"关闭"})}):d?n.jsx("div",{style:{width:"100%",height:"100%",background:"var(--ant-color-bg-container, #fff)"},children:n.jsx("iframe",{src:d,width:"100%",height:"100%",title:"PDF Viewer",style:{border:"none"}})}):n.jsx(a.Result,{status:"warning",title:"无可用链接",subTitle:"未能生成 PDF 的临时访问链接",extra:n.jsx(a.Button,{type:"primary",onClick:i.close,children:"关闭"})})};if(!window.__FOXEL_EXTERNALS__)throw console.error("[pdf-viewer] Foxel externals not found"),new Error("Foxel externals not found");window.FoxelRegister({mount:(s,i)=>{const t=R.createRoot(s);return t.render(l.createElement(T,i)),()=>t.unmount()}})})(window.__FOXEL_EXTERNALS__.React,window.__FOXEL_EXTERNALS__.ReactDOM,window.__FOXEL_EXTERNALS__.antd);
