(function(a,v,u){"use strict";var x={exports:{}},c={};var E;function R(){if(E)return c;E=1;var i=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function r(n,e,t){var d=null;if(t!==void 0&&(d=""+t),e.key!==void 0&&(d=""+e.key),"key"in e){t={};for(var l in e)l!=="key"&&(t[l]=e[l])}else t=e;return e=t.ref,{$$typeof:i,type:n,key:d,ref:e!==void 0?e:null,props:t}}return c.Fragment=s,c.jsx=r,c.jsxs=r,c}var p;function h(){return p||(p=1,x.exports=R()),x.exports}var o=h();const k={"Failed to get temporary link":"获取临时链接失败","Loading PDF...":"正在加载 PDF...","Unable to load PDF":"无法加载 PDF","No available link":"无可用链接","Failed to generate a temporary access link for the PDF.":"未能生成 PDF 的临时访问链接",Close:"关闭"},m=window.__FOXEL_EXTERNALS__.i18n,{t:g,useI18n:L}=m.create({zh:k}),T=({filePath:i,host:s})=>{const{foxelApi:r}=window.__FOXEL_EXTERNALS__,{t:n}=L(),[e,t]=a.useState(),[d,l]=a.useState(!0),[F,w]=a.useState();return a.useEffect(()=>{let _=!1;l(!0),w(void 0),t(void 0);const j=i.replace(/^\/+/,"");return r.vfs.getTempLinkToken(j).then(f=>{if(_)return;const P=r.vfs.getTempPublicUrl(f.token);t(P+"#toolbar=1&navpanes=1")}).catch(f=>{_||w(f.message||"Failed to get temporary link")}).finally(()=>{_||l(!1)}),()=>{_=!0}},[i,r]),d?o.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(u.Spin,{tip:n("Loading PDF...")})}):F?o.jsx(u.Result,{status:"error",title:n("Unable to load PDF"),subTitle:n(F),extra:o.jsx(u.Button,{type:"primary",onClick:s.close,children:n("Close")})}):e?o.jsx("div",{style:{width:"100%",height:"100%",background:"var(--ant-color-bg-container, #fff)"},children:o.jsx("iframe",{src:e,width:"100%",height:"100%",title:"PDF Viewer",style:{border:"none"}})}):o.jsx(u.Result,{status:"warning",title:n("No available link"),subTitle:n("Failed to generate a temporary access link for the PDF."),extra:o.jsx(u.Button,{type:"primary",onClick:s.close,children:n("Close")})})};if(!window.__FOXEL_EXTERNALS__)throw console.error("[pdf-viewer] Foxel externals not found"),new Error("Foxel externals not found");window.FoxelRegister({mount:(i,s)=>{const r=v.createRoot(i);return r.render(a.createElement(T,s)),()=>r.unmount()}})})(window.__FOXEL_EXTERNALS__.React,window.__FOXEL_EXTERNALS__.ReactDOM,window.__FOXEL_EXTERNALS__.antd);
